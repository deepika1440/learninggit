modal.addEventListener('keydown', function(e) {
    const focusable = modal.querySelectorAll('a, button, input, select, textarea, [tabindex="0"]');
    const first = focusable[0];
    const last = focusable[focusable.length - 1];

    if (e.key === 'Tab') {
        if (e.shiftKey && document.activeElement === first) {
            e.preventDefault();
            last.focus();
        } else if (!e.shiftKey && document.activeElement === last) {
            e.preventDefault();
            first.focus();
        }
    }
});
